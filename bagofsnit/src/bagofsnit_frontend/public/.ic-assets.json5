[
    {
        "match": "**/*",

        // Disable the standard security policy so we have full control over headers
        // This is needed for local development with 127.0.0.1
        "security_policy": "disabled",

        // Custom headers for local development
        "headers": {
            // CSP with 127.0.0.1 for local replica access
            "Content-Security-Policy": "default-src 'self'; script-src 'self'; connect-src 'self' http://localhost:* http://127.0.0.1:* https://icp0.io https://*.icp0.io https://icp-api.io; img-src 'self' data:; style-src 'self' 'unsafe-inline'; font-src 'self'; frame-ancestors 'none'; form-action 'self'; base-uri 'self';",
            // Only include supported Permissions-Policy features
            "Permissions-Policy": "accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()",
            // Basic security headers
            "X-Content-Type-Options": "nosniff",
            "X-Frame-Options": "DENY",
            "Referrer-Policy": "strict-origin-when-cross-origin"
        }
    }
]
